{"version":3,"sources":["components/Header/index.js","components/Header/header.js","components/Tools/canvasSize.js","components/Tools/basicTools.js","components/Tools/colorPicker.js","components/Tools/index.js","components/Tools/tools.js","components/utilities/drawCanvas.js","components/Frames/singe-frame.js","components/Frames/index.js","components/Frames/frames.js","components/utilities/lighten.js","components/utilities/paintBucketTool.js","components/Draw/draw.js","components/Draw/index.js","components/Animation/index.js","components/Animation/animation.js","components/MainApp/mainApp.js","components/MainApp/index.js","App.js","serviceWorker.js","index.js"],"names":["Header","react_default","a","createElement","className","CanvasSize","setSize","e","_this","props","target","value","onClick","this","Component","BasicTools","concat","highlight","data-tip","data-for","index_esm","dist_default","id","place","effect","ColorPicker","setFirstColor","persist","setColor","firstColor","secondColor","colors","setSecondColor","swapColors","type","onChange","Tools","selectTool","tool","closest","setState","selectedTool","canvasSize_CanvasSize","setFrameSize","basicTools_BasicTools","colorPicker_ColorPicker","DrawCanvas","ctx","frame","canvasSize","frameSize","pixelSize","Math","round","clearRect","forEach","row","rowInd","color","ind","fillStyle","fillRect","createEmptyFrame","size","Array","from","length","drawLine","startPoint","endPoint","_startPoint","Object","slicedToArray","x0","y0","_endPoint","x1","y1","dx","abs","dy","sx","sy","err","resp","push","e2","SingleFrame","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","updateCanvas","frameRef","current","getContext","React","createRef","_this2","cls","react_beautiful_dnd_esm","draggableId","index","key","provided","assign","ref","innerRef","draggableProps","dragHandleProps","select","width","height","framesCount","delete","undefined","duplicate","Frames","addFrame","newFrame","updateFrames","toConsumableArray","listFrames","selectCurrentFrame","reversFrame","oldState","objectSpread","reversed","deleteFrame","delFrame","splice","currentFrameId","duplicateFrame","duplFrame","_","cloneDeep","selectFrame","reorder","list","startIndex","endIndex","result","_result$splice","removed","onDragEnd","destination","newOrderedListFrames","source","state","framesArray","reverse","droppableId","droppableProps","map","singe_frame_SingleFrame","placeholder","lightenColor","percent","num","parseInt","replace","amt","R","B","G","toString","slice","getAroundPixels","coords","_coords","x","y","pixelsAround","startX","startY","config","line","func","circle","_startPoint2","_endPoint2","radius","floor","sqrt","pow","f","ddfX","ddfY","rectangle","_startPoint3","_endPoint3","apply","filledRect","_startPoint4","_endPoint4","LIGHTEN_PERCENT","Draw","onMouseDown","preventDefault","mouseDown","mouseLived","offsetX","offsetY","currentFrame","workColor","buttons","setStartDrawPoint","startDrawPoint","updateCurrentFrame","previousPoint","ctrlKey","onMouseMove","pixel","linePixels","drawFigure","onMouseClick","toCheck","bucketPixels","Set","join","pop","stringCoords","has","add","i","values","next","split","Number","getAllBucketPixels","_pixel","allPixelsWithSameColor","it","onMouseUp","onMouseLeave","onDrag","myRef","overlay","shotUpdate","save","arguments","filter","ondrag","addEventListener","removeEventListener","clearLocalStorage","Animation","drawOneFrame","animRef","animate","step","animationTimeout","setTimeout","window","requestAnimationFrame","fps","fpsChangeHandler","clearTimeout","min","max","htmlFor","initialState","MainApp","point","originalListFrames","sizedListFrames","sizedFrame","rowArr","localStorage","clear","setItem","JSON","stringify","parse","getItem","components_Header","components_Tools","components_Frames","components_Draw","components_Animation","App","components_MainApp","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.cee1dbff.chunk.js","sourcesContent":["import Header from './header';\n\nexport default Header;\n","import React from 'react';\nimport './assets/header.css';\n\nexport default function Header() {\n  return <h1 className='header'>Piskel Clone</h1>;\n}\n","import React, { Component } from 'react';\nimport './assets/canvasSize.css';\n\nexport default class CanvasSize extends Component {\n  setSize = (e) => {\n    this.props.setSize(e.target.value);\n  };\n\n  render() {\n    return (\n      <div className='tools__canvas-size' onClick={this.setSize}>\n        <button className='canvas-size_button size32' value={32}>32x32</button>\n        <button className='canvas-size_button size64' value={64}>64x64</button>\n        <button className='canvas-size_button size128' value={128}>128x128</button>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport ReactTooltip from 'react-tooltip';\nimport {\n  MdEdit, MdColorize, MdExposure, MdGradient, MdBorderColor, MdFormatPaint,\n  MdFormatColorFill, MdNote, MdCropLandscape, MdPanoramaFishEye, MdCallToAction,\n} from 'react-icons/md';\n\nexport default class BasicTools extends Component {\n  render() {\n    return (\n      <div className='tools__basic'>\n        <button className={`pen tools__button ${this.props.highlight === 'pen' ? 'tools__highlight' : ''}`}\n                value='pen' data-tip='' data-for='pen'><MdEdit/></button>\n        <ReactTooltip id='pen' place=\"right\" effect=\"solid\">Pen tool</ReactTooltip>\n\n        <button className={`eraser tools__button ${this.props.highlight === 'eraser' ? 'tools__highlight' : ''}`}\n                value='eraser' data-tip='' data-for='eraser'><MdNote className='eraser_icon'/></button>\n        <ReactTooltip id='eraser' place=\"right\" effect=\"solid\">Eraser tool</ReactTooltip>\n\n        <button className={`paint-bucket tools__button ${this.props.highlight === 'paintBucket' ? 'tools__highlight' : ''}`}\n                value='paintBucket' data-tip='' data-for='paintBucket'><MdFormatColorFill/></button>\n        <ReactTooltip id='paintBucket' place=\"right\" effect=\"solid\">Paint Bucket tool</ReactTooltip>\n\n        <button className={`paint-all-pixels tools__button ${this.props.highlight === 'paintAllPixels' ? 'tools__highlight' : ''}`}\n                value='paintAllPixels' data-tip='' data-for='paintAllPixels'><MdFormatPaint/></button>\n        <ReactTooltip id='paintAllPixels' place=\"right\" effect=\"solid\">Paint all <br/>pixels same <br/>color</ReactTooltip>\n\n        <button className={`pipette tools__button ${this.props.highlight === 'pipette' ? 'tools__highlight' : ''}`}\n                value='pipette' data-tip='' data-for='pipette'><MdColorize/></button>\n        <ReactTooltip id='pipette' place=\"right\" effect=\"solid\">Pipette tool</ReactTooltip>\n\n        <button className={`line tools__button ${this.props.highlight === 'line' ? 'tools__highlight' : ''}`}\n                value='line' data-tip='' data-for='line'><MdBorderColor/></button>\n        <ReactTooltip id='line' place=\"right\" effect=\"solid\">Stroke <br/>line tool</ReactTooltip>\n\n        <button className={`circle tools__button ${this.props.highlight === 'circle' ? 'tools__highlight' : ''}`}\n                value='circle' data-tip='' data-for='circle'><MdPanoramaFishEye/></button>\n        <ReactTooltip id='circle' place=\"right\" effect=\"solid\">Circle</ReactTooltip>\n\n        <button className={`rectangle tools__button ${this.props.highlight === 'rectangle' ? 'tools__highlight' : ''}`}\n                value='rectangle' data-tip='' data-for='rectangle'><MdCropLandscape/></button>\n        <ReactTooltip id='rectangle' place=\"right\" effect=\"solid\">Rectangle</ReactTooltip>\n\n        <button className={`filled-rect tools__button ${this.props.highlight === 'filledRect' ? 'tools__highlight' : ''}`}\n                value='filledRect' data-tip='' data-for='filledRect'><MdCallToAction/></button>\n        <ReactTooltip id='filledRect' place=\"right\" effect=\"solid\">Filled <br/>Rectangle</ReactTooltip>\n\n        <button className={`lighten tools__button ${this.props.highlight === 'lighten' ? 'tools__highlight' : ''}`}\n                value='lighten' data-tip='' data-for='lighten'><MdExposure/></button>\n        <ReactTooltip id='lighten' place=\"right\" effect=\"solid\">Lighten <br/> CTRL for Darken</ReactTooltip>\n\n        <button className={`dithering tools__button ${this.props.highlight === 'dithering' ? 'tools__highlight' : ''}`}\n                value='dithering' data-tip='' data-for='dithering'><MdGradient/></button>\n        <ReactTooltip id='dithering' place=\"right\" effect=\"solid\">Dithering</ReactTooltip>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { MdSync } from 'react-icons/md';\n\nexport default class ColorPicker extends Component {\n  setFirstColor = (e) => {\n    e.persist();\n    this.props.setColor({ firstColor: e.target.value, secondColor: this.props.colors.secondColor });\n  };\n\n  setSecondColor = (e) => {\n    e.persist();\n    this.props.setColor({ firstColor: this.props.colors.firstColor, secondColor: e.target.value });\n  };\n\n  swapColors = () => {\n    this.props.setColor({\n      firstColor: this.props.colors.secondColor,\n      secondColor: this.props.colors.firstColor,\n    });\n  };\n\n\n  render() {\n    return (\n      <div className='tools__color'>\n        <input\n          className='tools__firstColor'\n          type='color'\n          value={this.props.colors.firstColor}\n          onChange={this.setFirstColor} />\n        <input\n          className='tools__secondColor'\n          type='color'\n          value={this.props.colors.secondColor}\n          onChange={this.setSecondColor} />\n        <button className='tools__swap-colors' onClick={this.swapColors}><MdSync/></button>\n      </div>\n    );\n  }\n}\n","import Tools from './tools';\n\nexport default Tools;\n","import React, { Component } from 'react';\nimport './assets/tools.css';\nimport CanvasSize from './canvasSize';\nimport BasicTools from './basicTools';\nimport ColorPicker from './colorPicker';\n\n\nexport default class Tools extends Component {\n  selectTool = (e) => {\n    const tool = e.target.closest('.tools__button').value;\n    this.setState({ selectedTool: tool });\n    this.props.selectTool(tool);\n  };\n\n  render() {\n    return (\n      <div className='tools'>\n        <CanvasSize setSize={this.props.setFrameSize}/>\n        <div className='tools__tool-box' onClick={this.selectTool}>\n          <BasicTools highlight={this.props.selectedTool}/>\n        </div>\n        <ColorPicker colors={this.props.colors} setColor={this.props.setColor}/>\n      </div>\n    );\n  }\n}\n","const DrawCanvas = (ctx, frame, canvasSize, frameSize) => {\n  const pixelSize = Math.round(canvasSize / frameSize);\n\n  ctx.clearRect(0, 0, canvasSize, canvasSize);\n  frame.forEach((row, rowInd) => {\n    row.forEach((color, ind) => {\n      ctx.fillStyle = color;\n      ctx.fillRect(pixelSize * ind, pixelSize * rowInd, pixelSize, pixelSize);\n    });\n  });\n};\n\nexport default DrawCanvas;\n\nexport function createEmptyFrame(size) {\n  return Array.from({ length: size },\n    () => Array.from({ length: size }, () => '#a9a9a9'));\n}\n\nexport function drawLine(startPoint, endPoint) {\n  let [x0, y0] = startPoint;\n  const [x1, y1] = endPoint;\n  const dx = Math.abs(x1 - x0);\n  const dy = Math.abs(y1 - y0);\n  const sx = (x0 < x1) ? 1 : -1;\n  const sy = (y0 < y1) ? 1 : -1;\n  let err = dx - dy;\n\n  const resp = [];\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    resp.push([x0, y0]); // Do what you need to for this\n\n    if ((x0 === x1) && (y0 === y1)) break;\n    const e2 = 2 * err;\n    // eslint-disable-next-line no-param-reassign\n    if (e2 > -dy) { err -= dy; x0 += sx; }\n    // eslint-disable-next-line no-param-reassign\n    if (e2 < dx) { err += dx; y0 += sy; }\n  }\n  return resp;\n}\n\n\nexport function drawCircle(startPoint, endPoint) {\n  const [x0, y0] = startPoint;\n  const [x1, y1] = endPoint;\n  const radius = Math.floor(Math.sqrt(((x1 - x0) ** 2) + ((y1 - y0) ** 2)));\n  let f = 1 - radius;\n  let ddfX = 0;\n  let ddfY = -2 * radius;\n  let x = 0;\n  let y = radius;\n\n  const resp = [];\n\n  resp.push([x0, y0 + radius]);\n  resp.push([x0, y0 - radius]);\n  resp.push([x0 + radius, y0]);\n  resp.push([x0 - radius, y0]);\n\n  while (x < y) {\n    if (f >= 0) {\n      y -= 1;\n      ddfY += 2;\n      f += ddfY;\n    }\n    x += 1;\n    ddfX += 2;\n    f += ddfX + 1;\n\n    resp.push([x0 + x, y0 + y]);\n    resp.push([x0 - x, y0 + y]);\n    resp.push([x0 + x, y0 - y]);\n    resp.push([x0 - x, y0 - y]);\n    resp.push([x0 + y, y0 + x]);\n    resp.push([x0 - y, y0 + x]);\n    resp.push([x0 + y, y0 - x]);\n    resp.push([x0 - y, y0 - x]);\n  }\n\n  return resp;\n}\n\n\nexport function drawRect(startPoint, endPoint) {\n  const [x0, y0] = startPoint;\n  const [x1, y1] = endPoint;\n  const resp = [];\n\n  resp.push(...drawLine([x0, y0], [x1, y0]));\n  resp.push(...drawLine([x0, y0], [x0, y1]));\n  resp.push(...drawLine([x1, y0], [x1, y1]));\n  resp.push(...drawLine([x0, y1], [x1, y1]));\n\n  return resp;\n}\n\nexport function drawFilledRect(startPoint, endPoint) {\n  const [x0, y0] = startPoint;\n  const [x1, y1] = endPoint;\n  const resp = [];\n\n  let y = y0;\n  while (y < y1) {\n    resp.push(...drawLine([x0, y], [x1, y]));\n    y += 1;\n  }\n  return resp;\n}\n\n\nexport function filterPointInsideCanvas(canvasSize, arrayOfPoints) {\n  return arrayOfPoints.filter(\n    coords => (coords[0] < canvasSize && coords[0] >= 0)\n      && (coords[1] < canvasSize && coords[1] >= 0),\n  );\n}\n","import React, { Component } from 'react';\nimport { Draggable } from 'react-beautiful-dnd';\nimport { MdDelete, MdFilterNone } from 'react-icons/md';\nimport DrawCanvas from '../utilities/drawCanvas';\nimport './assets/single-frame.css';\n\nexport default class SingleFrame extends Component {\n  constructor(props) {\n    super(props);\n    this.canvasSize = 128;\n    this.frameRef = React.createRef();\n  }\n\n  componentDidUpdate() {\n    this.updateCanvas();\n  }\n\n  componentDidMount() {\n    this.updateCanvas();\n  }\n\n  updateCanvas = () => {\n    const ctx = this.frameRef.current.getContext('2d');\n    DrawCanvas(ctx, this.props.frame, this.canvasSize, this.props.frameSize);\n  };\n\n  render() {\n    const cls = this.props.highlight ? 'single-frame_canvas highlight' : 'single-frame_canvas';\n    return (\n      <Draggable draggableId={this.props.index + 1} index={this.props.index} key={this.props.index}>\n        {provided => (\n          <div className='single-frame' ref={provided.innerRef}\n               {...provided.draggableProps} {...provided.dragHandleProps}>\n            <canvas\n              className={cls}\n              onClick={this.props.select(this.props.index)}\n              width={this.canvasSize}\n              height={this.canvasSize}\n              ref={this.frameRef}\n            />\n            <div className='single-frame_index'>{this.props.index + 1}</div>\n            {this.props.framesCount > 1 ? <div className='single-frame_delete' onClick={this.props.delete(this.props.index)}><MdDelete/></div> : undefined}\n            <div className='single-frame_double' onClick={this.props.duplicate(this.props.index)}><MdFilterNone/></div>\n          </div>\n        )}\n      </Draggable>\n    );\n  }\n}\n","import Frames from './frames';\n\nexport default Frames;\n","import React, { Component } from 'react';\nimport _ from 'lodash';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport SingleFrame from './singe-frame';\nimport './assets/frames.css';\n\n\nexport default class Frames extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { reversed: false };\n  }\n\n  addFrame = () => {\n    const newFrame = Array.from({ length: this.props.frameSize },\n      () => Array.from({ length: this.props.frameSize }, () => '#a9a9a9'));\n    this.props.updateFrames([...this.props.listFrames, newFrame]);\n    this.props.selectCurrentFrame(this.props.listFrames.length);\n  };\n\n  reversFrame = () => {\n    this.setState(oldState => ({\n      ...oldState,\n      reversed: !oldState.reversed,\n    }));\n  };\n\n  deleteFrame = ind => () => {\n    const delFrame = [...this.props.listFrames];\n    delFrame.splice(ind, 1);\n    if (this.props.currentFrameId > delFrame.length - 1) {\n      this.props.selectCurrentFrame(delFrame.length - 1);\n    }\n    this.props.updateFrames(delFrame);\n  };\n\n  duplicateFrame = ind => () => {\n    const duplFrame = [...this.props.listFrames];\n    duplFrame.splice(ind, 0, _.cloneDeep(duplFrame[ind]));\n    this.props.updateFrames(duplFrame);\n    this.props.selectCurrentFrame(ind + 1);\n  };\n\n  selectFrame = ind => () => {\n    this.props.selectCurrentFrame(ind);\n  };\n\n  reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n\n    return result;\n  };\n\n  onDragEnd = (result) => {\n    if (!result.destination) {\n      return;\n    }\n\n    const newOrderedListFrames = this.reorder(\n      this.props.listFrames,\n      result.source.index,\n      result.destination.index,\n    );\n    this.props.updateFrames(newOrderedListFrames);\n    this.props.selectCurrentFrame(result.destination.index);\n  };\n\n  render() {\n    const { reversed } = this.state;\n    const framesArray = reversed ? [...this.props.listFrames].reverse() : this.props.listFrames;\n    return (\n      <DragDropContext onDragEnd={this.onDragEnd}>\n        <Droppable droppableId='droppableId'>\n          {provided => (\n            <div className='frames'\n                 {...provided.droppableProps}\n                 ref={provided.innerRef}>\n              <div className='frames__buttons'>\n                <button className='frames__add-frame' onClick={this.addFrame}>Add frame</button>\n                <button className='frames__revers-frame' onClick={this.reversFrame}>Reverse</button>\n              </div>\n              <div className='frames__container'>\n                {framesArray.map(\n                  (frame, ind) => <SingleFrame\n                    key={reversed ? framesArray.length - ind - 1 : ind}\n                    index={reversed ? framesArray.length - ind - 1 : ind}\n                    frame={frame}\n                    frameSize={this.props.frameSize}\n                    delete={this.deleteFrame}\n                    duplicate={this.duplicateFrame}\n                    select={this.selectFrame}\n                    framesCount={this.props.listFrames.length}\n                    highlight={(reversed\n                      ? framesArray.length - ind - 1 : ind) === this.props.currentFrameId}\n                  />,\n                )}\n                {provided.placeholder}\n              </div>\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n    );\n  }\n}\n","/* eslint-disable */\nexport default function lightenColor(color, percent) {\n  const num = parseInt(color.replace('#', ''), 16);\n  const amt = Math.round(2.55 * percent);\n  const R = (num >> 16) + amt;\n  const B = ((num >> 8) & 0x00FF) + amt;\n  const G = (num & 0x0000FF) + amt;\n\n  return `#${(0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (B < 255 ? B < 1 ? 0 : B : 255) * 0x100 + (G < 255 ? G < 1 ? 0 : G : 255)).toString(16).slice(1)}`;\n}\n","import _ from 'lodash';\n\nexport function getAroundPixels(frame, coords, color) {\n  const [x, y] = coords;\n  const pixelsAround = [];\n  for (let startX = x - 1; startX <= x + 1; startX += 1) {\n    for (let startY = y - 1; startY <= y + 1; startY += 1) {\n      if (frame.length < 1) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n      if (startX < 0 || startY < 0) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n      if (startX >= frame[0].length || startY >= frame.length) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n      if (frame[startY][startX] !== color) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n      if (x !== startX && y !== startY) {\n        if (frame[y][startX] !== color && frame[startY][x] !== color) {\n          // eslint-disable-next-line no-continue\n          continue;\n        }\n      }\n      pixelsAround.push([startX, startY]);\n    }\n  }\n\n  return pixelsAround;\n}\n\nexport function getAllBucketPixels(frame, coords, color) {\n  const toCheck = [coords];\n  const bucketPixels = new Set([_.join(coords)]);\n\n  while (toCheck.length > 0) {\n    const point = toCheck.pop();\n    const around = getAroundPixels(frame, point, color);\n\n    around.forEach((pixel) => {\n      const stringCoords = _.join(pixel);\n      if (!bucketPixels.has(stringCoords)) {\n        bucketPixels.add(stringCoords);\n        toCheck.push(pixel);\n      }\n    });\n  }\n  const resp = [];\n  const i = bucketPixels.values();\n\n  let x = i.next().value;\n  while (x) {\n    resp.push(_.split(x, ',').map(Number));\n    x = i.next().value;\n  }\n\n  return resp;\n}\n","import React, { Component } from 'react';\nimport _ from 'lodash';\nimport DrawCanvas, {\n  drawCircle,\n  drawFilledRect,\n  drawLine,\n  drawRect,\n  filterPointInsideCanvas,\n} from '../utilities/drawCanvas';\nimport lightenColor from '../utilities/lighten';\nimport { getAllBucketPixels } from '../utilities/paintBucketTool';\nimport './assets/draw.css';\n\n\nconst config = {\n  line: { func: drawLine },\n  circle: { func: drawCircle },\n  rectangle: { func: drawRect },\n  filledRect: { func: drawFilledRect },\n};\n\nconst LIGHTEN_PERCENT = 3;\n\n\nexport default class Draw extends Component {\n  constructor(props) {\n    super(props);\n    this.myRef = React.createRef();\n    this.canvasSize = 639;\n    this.state = { coords: [0, 0], shotUpdate: true };\n    // this.deb = debounce(this.updateAfterDebounce, 100);\n    this.pixelSize = Math.round(this.canvasSize / this.props.frameSize);\n  }\n\n  onMouseDown = (e) => {\n    this.pixelSize = Math.round(this.canvasSize / this.props.frameSize);\n    e.preventDefault();\n    this.mouseDown = true;\n    this.mouseLived = false;\n\n    const x = Math.floor(e.offsetX / this.pixelSize);\n    const y = Math.floor(e.offsetY / this.pixelSize);\n    const frame = this.props.currentFrame;\n    const workColor = frame[y][x];\n    const color = e.buttons === 1 ? this.props.colors.firstColor : this.props.colors.secondColor;\n\n    this.props.setStartDrawPoint({ coords: [x, y], color });\n\n    if (this.props.selectedTool === 'pen') {\n      frame[y][x] = this.props.startDrawPoint.color;\n      this.updateCurrentFrame(frame);\n      this.previousPoint = [x, y];\n    }\n\n    if (this.props.selectedTool === 'dithering') {\n      frame[y][x] = ((x + y) % 2) === 0\n        ? this.props.colors.firstColor : this.props.colors.secondColor;\n      this.updateCurrentFrame(frame);\n      this.previousPoint = [x, y];\n    }\n\n    if (this.props.selectedTool === 'eraser') {\n      frame[y][x] = '#a9a9a9';\n      this.updateCurrentFrame(frame);\n      this.previousPoint = [x, y];\n    }\n\n    if (this.props.selectedTool === 'lighten') {\n      if (e.ctrlKey) {\n        frame[y][x] = lightenColor(workColor, -LIGHTEN_PERCENT);\n      } else {\n        frame[y][x] = lightenColor(workColor, LIGHTEN_PERCENT);\n      }\n      this.previousPoint = [x, y];\n      this.updateCurrentFrame(frame);\n    }\n  };\n\n  onMouseMove = (e) => {\n    this.pixelSize = Math.round(this.canvasSize / this.props.frameSize);\n    const x = Math.floor(e.offsetX / this.pixelSize);\n    const y = Math.floor(e.offsetY / this.pixelSize);\n    const frame = this.props.currentFrame;\n\n    this.setState(oldState => ({\n      ...oldState,\n      coords: [x, y],\n    }));\n\n    if (!this.mouseDown) return;\n\n    if (this.props.selectedTool === 'pen') {\n      const prevPoint = this.previousPoint;\n      const linePixels = drawLine(prevPoint, [x, y]);\n\n      linePixels.forEach((pixel) => {\n        frame[pixel[1]][pixel[0]] = e.buttons === 1\n          ? this.props.colors.firstColor : this.props.colors.secondColor;\n      });\n\n      this.previousPoint = [x, y];\n      this.updateCurrentFrame(frame);\n    }\n\n    if (this.props.selectedTool === 'dithering') {\n      const prevPoint = this.previousPoint;\n      const linePixels = drawLine(prevPoint, [x, y]);\n\n      linePixels.forEach((pixel) => {\n        frame[pixel[1]][pixel[0]] = ((pixel[0] + pixel[1]) % 2) === 0\n          ? this.props.colors.firstColor : this.props.colors.secondColor;\n      });\n\n      this.previousPoint = [x, y];\n      this.updateCurrentFrame(frame);\n    }\n\n\n    if (this.props.selectedTool === 'eraser') {\n      const prevPoint = this.previousPoint;\n      const linePixels = drawLine(prevPoint, [x, y]);\n      linePixels.forEach((pixel) => {\n        frame[pixel[1]][pixel[0]] = '#a9a9a9';\n      });\n      this.previousPoint = [x, y];\n      this.updateCurrentFrame(frame);\n    }\n\n    if (this.props.selectedTool === 'lighten') {\n      const linePixels = drawLine(this.previousPoint, [x, y]);\n      this.previousPoint = [x, y];\n      if (e.ctrlKey) {\n        linePixels.forEach((pixel) => {\n          frame[pixel[1]][pixel[0]] = lightenColor(frame[pixel[1]][pixel[0]], -LIGHTEN_PERCENT);\n        });\n      } else {\n        linePixels.forEach((pixel) => {\n          frame[pixel[1]][pixel[0]] = lightenColor(frame[pixel[1]][pixel[0]], LIGHTEN_PERCENT);\n        });\n      }\n      this.updateCurrentFrame(frame);\n    }\n\n    // draw figures\n    if (this.props.selectedTool in config) {\n      this.drawFigure([x, y], frame, this.props.startDrawPoint.color);\n    }\n  };\n\n  updateCurrentFrame(frame) {\n    this.props.updateCurrentFrame(frame);\n  }\n\n  onMouseClick = (e) => {\n    e.preventDefault();\n\n    const x = Math.floor(e.offsetX / this.pixelSize);\n    const y = Math.floor(e.offsetY / this.pixelSize);\n    const frame = this.props.currentFrame;\n    const workColor = frame[y][x];\n\n    if (this.props.selectedTool === 'paintBucket') {\n      const toColor = getAllBucketPixels(frame, [x, y], workColor);\n      toColor.forEach((pixel) => {\n        const [x1, y1] = pixel;\n        frame[y1][x1] = _.cloneDeep(\n          e.buttons === 0 ? this.props.colors.firstColor : this.props.colors.secondColor,\n        );\n      });\n      this.updateCurrentFrame(frame);\n    }\n\n    if (this.props.selectedTool === 'paintAllPixels') {\n      const allPixelsWithSameColor = frame.map(row => row.map((it) => {\n        let color = it;\n        if (color === workColor) {\n          color = e.buttons === 0 ? this.props.colors.firstColor : this.props.colors.secondColor;\n        }\n        return color;\n      }));\n      this.updateCurrentFrame(allPixelsWithSameColor);\n    }\n\n    if (this.props.selectedTool === 'pipette') {\n      const { colors } = this.props;\n      if (e.buttons === 0) {\n        colors.firstColor = workColor;\n      } else {\n        colors.secondColor = workColor;\n      }\n      this.props.setColor(colors);\n    }\n  };\n\n  drawFigure(endPoint, frame, color, save = false) {\n    const startPoint = this.props.startDrawPoint.coords;\n    let linePixels = config[this.props.selectedTool].func(startPoint, endPoint);\n    linePixels = filterPointInsideCanvas(this.props.frameSize, linePixels);\n    const newFrame = _.cloneDeep(frame);\n\n    linePixels.forEach((pixel) => {\n      newFrame[pixel[1]][pixel[0]] = color;\n    });\n\n    if (save) {\n      this.setState(oldState => ({\n        ...oldState,\n        overlay: undefined,\n      }), () => { this.updateCurrentFrame(newFrame); });\n    } else {\n      this.setState(oldState => ({\n        ...oldState,\n        overlay: newFrame,\n      }));\n    }\n  }\n\n  onMouseUp = (e) => {\n    this.mouseDown = false;\n    const x = Math.floor(e.offsetX / this.pixelSize);\n    const y = Math.floor(e.offsetY / this.pixelSize);\n\n    const frame = this.props.currentFrame;\n    if (this.props.selectedTool in config && !this.mouseLived) {\n      this.drawFigure([x, y], frame, this.props.startDrawPoint.color, true);\n    }\n  };\n\n  onMouseLeave = (e) => {\n    const x = Math.floor(e.offsetX / this.pixelSize);\n    const y = Math.floor(e.offsetY / this.pixelSize);\n    const frame = this.props.currentFrame;\n\n    if (this.props.selectedTool in config && this.mouseDown) {\n      this.drawFigure([x, y], frame, this.props.startDrawPoint.color, true);\n    }\n    this.mouseLived = true;\n    this.mouseDown = false;\n\n    this.setState(oldState => ({\n      ...oldState,\n      coords: [0, 0],\n    }));\n  };\n\n  onDrag = (e) => { e.preventDefault(); };\n\n  componentDidMount() {\n    this.myRef.current.ondrag = (e) => { e.preventDefault(); };\n    this.updateCanvas();\n\n    this.myRef.current.addEventListener('mousedown', this.onMouseDown);\n    this.myRef.current.addEventListener('mousemove', this.onMouseMove);\n    this.myRef.current.addEventListener('mouseleave', this.onMouseLeave);\n    this.myRef.current.addEventListener('mouseup', this.onMouseUp);\n    this.myRef.current.addEventListener('click', this.onMouseClick);\n    this.myRef.current.addEventListener('contextmenu', this.onMouseClick);\n    this.myRef.current.addEventListener('drag', this.onDrag);\n  }\n\n  componentWillUnmount() {\n    this.myRef.current.removeEventListener('mousedown', this.onMouseDown);\n    this.myRef.current.removeEventListener('mousemove', this.onMouseMove);\n    this.myRef.current.removeEventListener('mouseleave', this.onMouseLeave);\n    this.myRef.current.removeEventListener('mouseup', this.onMouseUp);\n    this.myRef.current.removeEventListener('click', this.onMouseClick);\n    this.myRef.current.removeEventListener('contextmenu', this.onMouseClick);\n    this.myRef.current.removeEventListener('drag', this.onDrag);\n  }\n\n  componentDidUpdate() {\n    this.updateCanvas();\n  }\n\n  updateCanvas = () => {\n    const ctx = this.myRef.current.getContext('2d');\n    DrawCanvas(ctx, this.state.overlay || this.props.currentFrame,\n      this.canvasSize, this.props.frameSize);\n  };\n\n  render() {\n    return (\n      <div className='draw'>\n        <div className='draw__new-sprite' onClick={this.props.clearLocalStorage} >Start new sprite</div>\n        <canvas ref={this.myRef} className='draw__canvas' width={this.canvasSize} height={this.canvasSize}/>\n        {/* eslint-disable-next-line max-len */}\n        <div>[{this.props.frameSize} x {this.props.frameSize}] {this.state.coords[0]} : {this.state.coords[1]}</div>\n      </div>\n    );\n  }\n}\n","import Draw from './draw';\n\nexport default Draw;\n","import Animation from './animation';\n\nexport default Animation;\n","import React, { Component } from 'react';\nimport DrawCanvas from '../utilities/drawCanvas';\nimport './assets/animation.css';\n\nexport default class Animation extends Component {\n  constructor(props) {\n    super(props);\n    this.animRef = React.createRef();\n    this.canvasSize = 256;\n    this.state = { fps: 2 };\n  }\n\n  drawOneFrame = (frame) => {\n    const ctx = this.animRef.current.getContext('2d');\n    DrawCanvas(ctx, frame, this.canvasSize, this.props.frameSize);\n  };\n\n  animate = () => {\n    if (this.props.listFrames && this.props.listFrames.length > 0) {\n      if (this.props.listFrames[this.step]) {\n        this.drawOneFrame(this.props.listFrames[this.step]);\n        this.step += 1;\n      } else {\n        this.drawOneFrame(this.props.listFrames[0]);\n        this.step = 1;\n      }\n    }\n    this.animationTimeout = setTimeout(\n      () => window.requestAnimationFrame(this.animate), 1000 / this.state.fps,\n    );\n  };\n\n  componentDidMount() {\n    this.animate();\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.animationTimeout);\n  }\n\n  fpsChangeHandler = (e) => {\n    this.setState({ fps: e.target.value });\n  };\n\n  render() {\n    return (\n      <div className='animation'>\n        <canvas\n          ref={this.animRef}\n          className='animation__canvas'\n          width={this.canvasSize}\n          height={this.canvasSize}\n        />\n        <input\n          className='animation__fps-range'\n          onChange={this.fpsChangeHandler}\n          id='fps-range'\n          value={this.state.fps}\n          type='range'\n          min={1}\n          max={24} />\n        <label htmlFor=\"fps-range\">{this.state.fps} FPS</label>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport _ from 'lodash';\nimport Header from '../Header';\nimport Tools from '../Tools';\nimport Frames from '../Frames';\nimport Draw from '../Draw';\nimport Animation from '../Animation';\nimport { createEmptyFrame } from '../utilities/drawCanvas';\nimport './assets/mainApp.css';\n\n\nconst newFrame = createEmptyFrame(32);\nconst initialState = {\n  currentFrameId: 0,\n  listFrames: [newFrame],\n  frameSize: 32,\n  colors: {\n    firstColor: '#ffffff',\n    secondColor: '#000000',\n  },\n  tool: 'pen',\n};\n\n\nexport default class MainApp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = JSON.parse(localStorage.getItem('state')) || _.cloneDeep(initialState);\n  }\n\n  // Frames section\n  updateFrames = (listFrames) => {\n    this.setState(oldState => ({\n      ...oldState,\n      listFrames,\n    }));\n  };\n\n  selectCurrentFrame = (id) => {\n    this.setState(oldState => ({\n      ...oldState,\n      currentFrameId: id,\n    }));\n  };\n\n  // Tools section\n  updateCurrentFrame = (frame) => {\n    this.setState((oldState) => {\n      const listFrames = [...this.state.listFrames];\n      listFrames[this.state.currentFrameId] = frame;\n      return {\n        ...oldState,\n        listFrames,\n      };\n    });\n  };\n\n  selectTool = (tool) => {\n    this.setState(oldState => ({\n      ...oldState,\n      tool,\n    }));\n  };\n\n  // DRAW section\n  setColor = (colors) => {\n    // colors should be {firstColor: '#fff', secondColor: '#000}\n    this.setState(oldState => ({\n      ...oldState,\n      colors,\n    }));\n  };\n\n  // point should be {coords: [0, 0], color: '#fff'}\n  setStartDrawPoint = (point) => {\n    this.setState(oldState => ({\n      ...oldState,\n      startDrawPoint: point,\n    }));\n  };\n\n  setFrameSize = (frameSize) => {\n    if ((frameSize - this.state.frameSize) === 0) return;\n\n    const originalListFrames = _.cloneDeep(this.state.listFrames);\n    const sizedListFrames = [];\n\n    originalListFrames.forEach((frame) => {\n      const emptyFrame = createEmptyFrame(frameSize);\n      const sizedFrame = emptyFrame.map((row, rowInd) => {\n        const rowArr = [...row];\n        if (frame[rowInd]) {\n          rowArr.splice(0, this.state.frameSize, ...frame[rowInd]);\n        }\n\n        rowArr.length = frameSize;\n        return rowArr;\n      });\n      sizedListFrames.push(sizedFrame);\n    });\n\n    this.setState(oldState => ({\n      ...oldState,\n      frameSize,\n      listFrames: sizedListFrames,\n    }));\n  };\n\n\n  // default action on load and save\n  save = () => {\n    localStorage.clear();\n    localStorage.setItem('state', JSON.stringify(this.state));\n  };\n\n  clearLocalStorage = () => {\n    this.setState(initialState);\n    this.save();\n  };\n\n  render() {\n    this.save();\n    return (\n      <div className='main-app'>\n        <Header />\n        <Tools\n          setFrameSize={this.setFrameSize}\n          selectTool={this.selectTool}\n          selectedTool={this.state.tool}\n          colors={this.state.colors}\n          setColor={this.setColor}\n        />\n        <Frames\n          frameSize={this.state.frameSize}\n          listFrames={this.state.listFrames}\n          currentFrameId={this.state.currentFrameId}\n          updateFrames={this.updateFrames}\n          selectCurrentFrame={this.selectCurrentFrame}\n        />\n        <Draw\n          frameSize={this.state.frameSize}\n          currentFrame={this.state.listFrames[this.state.currentFrameId]}\n          updateCurrentFrame={this.updateCurrentFrame}\n          clearLocalStorage={this.clearLocalStorage}\n          selectedTool={this.state.tool}\n          colors={this.state.colors}\n          setColor={this.setColor}\n          startDrawPoint={this.state.startDrawPoint}\n          setStartDrawPoint={this.setStartDrawPoint}\n          key={`${this.state.currentFrameId}/${this.state.listFrames.length}`}\n        />\n        <Animation\n          frameSize={this.state.frameSize}\n          listFrames={this.state.listFrames}\n        />\n      </div>\n    );\n  }\n}\n","import MainApp from './mainApp';\n\nexport default MainApp;\n","import React from 'react';\nimport './App.css';\nimport MainApp from './components/MainApp';\n\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <MainApp/>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}